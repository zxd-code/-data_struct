original valarray<int> vi

[0,1,2,3,4,5,6,7,8,9]

original valarray<bool> mask

[1,0,1,1,1,0,0,1,1,0]

vi[mask]

[0,2,3,4,7,8]

vi[mask] += vi[mask]

[0,1,4,6,8,5,6,14,16,9]
